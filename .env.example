# Auth API Environment Variables
# This file documents the environment variables used by the better-auth service.
# In Docker, these are set in docker-compose.yaml
# For local development without Docker, copy to .env.local

# ===========================
# Node Environment
# ===========================
NODE_ENV=development
PORT=3002
LOG_LEVEL=info

# ===========================
# Database Configuration
# ===========================
DATABASE_URL=postgresql://user:pass@localhost:5432/database?schema=auth
DATABASE_SCHEMA=auth

# ===========================
# Redis/ValKey Configuration
# ===========================
# Used for Better Auth secondary storage (session data and rate limiting)
#
# For local development (standalone mode):
REDIS_URL=redis://localhost:6379/1
#
# For production/staging (Sentinel mode - high availability):
# Set VALKEY_SENTINEL_HOST to enable Sentinel mode (REDIS_URL will be ignored)
VALKEY_SENTINEL_HOST=domain-staging-valkey
VALKEY_SENTINEL_PORT=26379
VALKEY_SENTINEL_MASTER_NAME=mymaster

# ===========================
# Better-Auth Configuration
# ===========================
# Subdomain Routing (auth is on its own subdomain)
# Local Development: http://localhost:3002
# Staging: https://auth-staging.domain.com
# Production: https://auth.domain.com
BETTER_AUTH_URL=http://localhost:3002
BETTER_AUTH_SECRET=your-secret-key-min-32-chars-replace-in-production
BETTER_AUTH_TRUST_HOST=true

# ===========================
# Email Configuration (SendGrid)
# ===========================
SENDGRID_API_KEY=your-sendgrid-api-key-here
SENDGRID_FROM_EMAIL=noreply@example.com
SENDGRID_FROM_NAME=YourApp
# Optional: Use SendGrid Dynamic Templates (format: d-xxxxxxxxxxxxx)
SENDGRID_VERIFICATION_TEMPLATE_ID=
SENDGRID_RESET_TEMPLATE_ID=
SUPPORT_EMAIL=support@example.com

# Email Verification Settings
REQUIRE_EMAIL_VERIFICATION=false

# ===========================
# OAuth Providers (Optional)
# ===========================
# GitHub OAuth (get from https://github.com/settings/developers)
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=

# Google OAuth
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# ===========================
# Application Branding
# ===========================
APP_NAME=YourApp
COOKIE_PREFIX=yourapp
PRODUCTION_DOMAIN=example.com
STAGING_DOMAIN=staging.example.com

# ===========================
# Cookie Domain Configuration
# ===========================
# Set cookie domain for cross-subdomain sharing (WITHOUT leading dot per Better Auth spec)
# Development: Not used (hardcoded to "localhost")
# Staging: feedvalue.com (shares cookies between auth-staging and staging subdomains)
# Production: feedvalue.com (shares cookies between auth and www subdomains)
# Leave empty to disable cross-subdomain cookies (uses exact request domain)
COOKIE_DOMAIN=feedvalue.com

# ===========================
# Session Configuration
# ===========================
SESSION_EXPIRES_IN=86400
SESSION_UPDATE_AGE=3600
SESSION_SECURE_COOKIES=false

# ===========================
# CORS Configuration
# ===========================
# Local Development: localhost origins
# Staging: https://staging.domain.com,https://api-staging.domain.com
# Production: https://domain.com,https://api.domain.com
CORS_ORIGINS=http://localhost:5173,http://localhost:3000

# ===========================
# Security
# ===========================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW=900000

# ===========================
# Cloudflare Turnstile (Spam Protection)
# ===========================
# Disabled in development mode (localhost not allowed in Cloudflare)
# Get secret key from: https://dash.cloudflare.com/
TURNSTILE_SECRET_KEY=1x0000000000000000000000000000000AA
TURNSTILE_ENABLED=false

# ===========================
# Frontend URL
# ===========================
# Local Development: http://localhost:5173
# Staging: https://staging.domain.com
# Production: https://domain.com
FRONTEND_URL=http://localhost:5173

# ===========================
# Core API URL (for internal communication)
# ===========================
# Local Development: http://localhost:3001
# Staging: https://api-staging.domain.com
# Production: https://api.domain.com
API_URL=http://localhost:3001
